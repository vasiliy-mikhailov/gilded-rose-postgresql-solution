DECLARE
  l_item RECORD;
  l_name item.name%TYPE;
  l_sell_in item.sell_in%TYPE;
  l_quality item.quality%TYPE;
  l_base_name text;
  l_is_conjured boolean;
  l_new_quality numeric;
  l_new_sell_in numeric;
BEGIN
  perform public.piggly_branch($PIGGLY$911dfd844359bbda$PIGGLY$);
  FOR l_item IN SELECT name, sell_in, quality, ctid FROM item FOR UPDATE LOOP
    perform public.piggly_cond($PIGGLY$46a332cb794fe896$PIGGLY$, true);
    perform public.piggly_branch($PIGGLY$5b2a3ac6f0d106f1$PIGGLY$);
    l_name := l_item.name; l_sell_in := l_item.sell_in; l_quality := l_item.quality;
    l_is_conjured := LEFT(l_name, 9) = 'Conjured ';
    l_base_name := CASE WHEN l_is_conjured THEN SUBSTRING(l_name FROM 10) ELSE l_name END;
    CASE
      WHEN public.piggly_cond($PIGGLY$b23dbd727fb6cbfc$PIGGLY$, (l_base_name = 'Sulfuras, Hand of Ragnaros')) THEN perform public.piggly_branch($PIGGLY$c93dbc7d7322a308$PIGGLY$);SELECT * FROM update_sulfuras(l_quality, l_sell_in, l_is_conjured) INTO l_new_quality, l_new_sell_in;
      WHEN public.piggly_cond($PIGGLY$445e391ee201dde7$PIGGLY$, (l_base_name = 'Aged Brie')) THEN perform public.piggly_branch($PIGGLY$dd9426b1e90e78a1$PIGGLY$);SELECT * FROM update_aged_brie(l_quality, l_sell_in, l_is_conjured) INTO l_new_quality, l_new_sell_in;
      WHEN public.piggly_cond($PIGGLY$121b0b8c2ef7afcc$PIGGLY$, (l_base_name = 'Backstage passes to a TAFKAL80ETC concert')) THEN perform public.piggly_branch($PIGGLY$98a42562cc3adce2$PIGGLY$);SELECT * FROM update_backstage_passes(l_quality, l_sell_in, l_is_conjured) INTO l_new_quality, l_new_sell_in;
      ELSE perform public.piggly_branch($PIGGLY$cf99951ed7a9e1f3$PIGGLY$);SELECT * FROM update_normal(l_quality, l_sell_in, l_is_conjured) INTO l_new_quality, l_new_sell_in;
    END CASE;
    UPDATE item SET name = l_name, sell_in = l_new_sell_in, quality = l_new_quality WHERE ctid = l_item.ctid;
  
    perform public.piggly_signal($PIGGLY$46a332cb794fe896$PIGGLY$, $PIGGLY$@$PIGGLY$);
  END LOOP;
perform public.piggly_cond($PIGGLY$46a332cb794fe896$PIGGLY$, false);
END;