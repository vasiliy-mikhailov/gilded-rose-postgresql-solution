DECLARE
    want_type TEXT := $1;
BEGIN
    perform public.piggly_branch($PIGGLY$39dfc00aa08cb31a$PIGGLY$);
    IF public.piggly_cond($PIGGLY$f832fa50ef7a8295$PIGGLY$, (pg_version_num() >= 170000)) THEN
        -- to_regtypemod() in 17 allows easy and corret normalization.
        perform public.piggly_branch($PIGGLY$c71e4928f62acca3$PIGGLY$);
        perform public.piggly_branch($PIGGLY$0f9979d3904edb06$PIGGLY$);RETURN format_type(to_regtype(want_type), to_regtypemod(want_type));
    END IF;

    IF public.piggly_cond($PIGGLY$4a301be276d01499$PIGGLY$, (want_type::regtype = 'interval'::regtype)) THEN
        -- We cannot normlize interval types without to_regtypemod(), So
        -- just return it as is.
        perform public.piggly_branch($PIGGLY$0fcc90489c5775a0$PIGGLY$);
        perform public.piggly_branch($PIGGLY$4d2e499e70e47a55$PIGGLY$);RETURN want_type;
    END IF;

    -- Use the typmodin functions to correctly normalize types.
    DECLARE
        typmodin_arg cstring[];
        typmodin_func regproc;
        typmod int;
    BEGIN
        -- Extract type modifier from type declaration and format as cstring[] literal.
        perform public.piggly_branch($PIGGLY$5ca1f82cead35bc8$PIGGLY$);
        typmodin_arg := translate(substring(want_type FROM '[(][^")]+[)]'), '()', '{}');

        -- Find typmodin function for want_type.
        SELECT typmodin INTO typmodin_func
        FROM pg_catalog.pg_type
        WHERE oid = want_type::regtype;

        IF public.piggly_cond($PIGGLY$26b2f83dc2c529ea$PIGGLY$, (typmodin_func = 0)) THEN
            -- Easy: types without typemods.
            perform public.piggly_branch($PIGGLY$c46ceaa4f5041071$PIGGLY$);
            perform public.piggly_branch($PIGGLY$3f8a80263bceba7a$PIGGLY$);RETURN format_type(want_type::regtype, null);
        END IF;

        -- Get typemod via type-specific typmodin function.
        EXECUTE format('SELECT %s(%L)', typmodin_func, typmodin_arg) INTO typmod;
        perform public.piggly_branch($PIGGLY$10f9c2794f4e4835$PIGGLY$);RETURN format_type(want_type::regtype, typmod);
    END;
    EXCEPTION WHEN OTHERS THEN perform public.piggly_branch($PIGGLY$6d06136f95f0c237$PIGGLY$);perform public.piggly_branch($PIGGLY$de0810cce4ed6109$PIGGLY$);RETURN NULL;
END;