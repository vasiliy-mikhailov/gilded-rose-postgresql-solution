DECLARE
  l_new_sell_in numeric := p_sell_in - 1;
  l_delta integer := CASE WHEN p_is_conjured THEN 2 ELSE 1 END;
  l_total_delta integer := l_delta + (CASE WHEN l_new_sell_in < 0 THEN l_delta ELSE 0 END);
BEGIN
  RETURN QUERY SELECT increase_quality(p_quality, l_total_delta), l_new_sell_in;
END;